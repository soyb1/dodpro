<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DOD Mining App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Load TON SDK -->
    <script src="https://unpkg.com/@tonconnect/sdk@latest"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="logo">
        <h1>DOD Mining App</h1>
        <p>Welcome, <strong>Guest</strong>!</p>
        <p>Your referral code: <strong>PX0l4V</strong></p>
        <p>Your balance: <strong>10 DOD</strong></p>
    </div>

    <div class="bottom-nav">
        <button class="btn">Upgrade Mining</button>
        <button class="btn">Tap Mining</button>
        <button class="btn">Spin & Earn</button>
        <button class="btn">Airdrop</button>
        <button class="btn">Referral</button>
        <button class="btn" onclick="sendTon()">Send TON</button>
    </div>

    <div class="status" id="statusMsg"></div>

    <script>
        async function sendTon() {
            try {
                const connector = new TON_CONNECT.TonConnect();
                const result = await connector.sendTransaction({
                    messages: [{
                        address: 'UQAL6w9kbYSioAM_jXk91CXt6Akdam8j88C6LxdYBa-Z7nrH',
                        amount: '1000000', // 0.001 TON
                        payload: ''
                    }],
                    validUntil: Math.floor(Date.now() / 1000) + 60
                });
                document.getElementById('statusMsg').innerText = "TON Transaction sent!";
            } catch (error) {
                document.getElementById('statusMsg').innerText = "TON transaction failed: " + error;
            }
        }
    </script>
</body>
</html>
